var h=Object.defineProperty;var d=(i,e,r)=>e in i?h(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var t=(i,e,r)=>d(i,typeof e!="symbol"?e+"":e,r);import{f as a,h as c,j as u,b as s,k}from"./index-Cos8uFQt.js";function p(){return`
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M9 4H4V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M15 4H20V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M9 20H4V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M15 20H20V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`}function g(){return`
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M4 9V4h5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M20 9V4h-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M4 15v5h5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M20 15v5h-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M9 9l-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M15 9l3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M9 15l-3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M15 15l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`}class C{constructor(e={}){t(this,"element");t(this,"fullscreenBtn");t(this,"pickModeBtn",null);t(this,"northCalibrationBtn",null);t(this,"vrModeBtn",null);t(this,"handlePickModeChange",null);t(this,"handleFullscreenChange",null);t(this,"viewerRootEl");t(this,"onTogglePickMode");t(this,"onOpenNorthCalibration");t(this,"onToggleVrMode");t(this,"isPickModeActive",!1);t(this,"isVrModeActive",!1);this.viewerRootEl=e.viewerRootEl,this.onTogglePickMode=e.onTogglePickMode,this.onOpenNorthCalibration=e.onOpenNorthCalibration,this.onToggleVrMode=e.onToggleVrMode,this.element=document.createElement("div"),this.element.className="vr-topright-controls",this.handlePickModeChange=n=>{const o=n;this.updatePickModeState(o.detail.enabled)},window.addEventListener("vr:pickmode",this.handlePickModeChange),this.handleFullscreenChange=()=>{this.syncFullscreenState()},document.addEventListener("fullscreenchange",this.handleFullscreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange),this.fullscreenBtn=document.createElement("button"),this.fullscreenBtn.className="vr-topright-btn vr-top-icon-only vr-icon-btn",this.fullscreenBtn.setAttribute("aria-label","è¿›å…¥å…¨å±"),this.fullscreenBtn.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation();const o=a();try{if(o)await c();else{const l=this.viewerRootEl;if(!l){console.warn("[TopRightControls] fullscreen target not set");return}await u(l)}}catch(l){s&&console.debug("[TopRightControls] fullscreen toggle failed",l)}finally{window.setTimeout(()=>{this.syncFullscreenState()},100)}}),this.syncFullscreenState(),this.onTogglePickMode&&(this.pickModeBtn=document.createElement("button"),this.pickModeBtn.className="vr-topright-btn",this.pickModeBtn.setAttribute("aria-label","æ‹¾å–æ¨¡å¼"),this.pickModeBtn.title="æ‹¾å–æ¨¡å¼ï¼šç‚¹å‡»ç”»é¢è·å– yaw/pitch",this.pickModeBtn.textContent="ğŸ¯",this.pickModeBtn.style.fontSize="18px",this.pickModeBtn.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),this.onTogglePickMode){const o=this.onTogglePickMode();this.updatePickModeState(o)}}),this.element.appendChild(this.pickModeBtn)),e.showNorthCalibration!==!1&&(e.onOpenNorthCalibration||s)&&this.onOpenNorthCalibration&&(this.northCalibrationBtn=document.createElement("button"),this.northCalibrationBtn.className="vr-topright-btn",this.northCalibrationBtn.setAttribute("aria-label","æ ¡å‡†åŒ—å‘"),this.northCalibrationBtn.title="æ ¡å‡†åŒ—å‘ï¼šè®¾ç½®å½“å‰åœºæ™¯çš„åŒ—æ–¹å‘",this.northCalibrationBtn.textContent="ğŸ§­",this.northCalibrationBtn.style.fontSize="18px",this.northCalibrationBtn.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.onOpenNorthCalibration&&this.onOpenNorthCalibration()}),this.element.appendChild(this.northCalibrationBtn)),k()&&this.onToggleVrMode&&(this.vrModeBtn=document.createElement("button"),this.vrModeBtn.className="vr-topright-btn vr-top-icon-only vr-icon-btn",this.vrModeBtn.setAttribute("aria-label","VRçœ¼é•œ"),this.vrModeBtn.title="VRçœ¼é•œï¼šè½¬åŠ¨è®¾å¤‡æ§åˆ¶è§†è§’",this.vrModeBtn.textContent="ğŸ¥½",this.vrModeBtn.style.fontSize="18px",this.vrModeBtn.addEventListener("click",async n=>{if(n.preventDefault(),n.stopPropagation(),this.onToggleVrMode)try{const o=await this.onToggleVrMode();this.updateVrModeState(o)}catch(o){s&&console.debug("[TopRightControls] VR mode toggle failed",o)}}),this.element.appendChild(this.vrModeBtn)),this.element.appendChild(this.fullscreenBtn)}updatePickModeState(e){this.isPickModeActive=e,this.pickModeBtn&&(this.pickModeBtn.setAttribute("aria-label",e?"å…³é—­æ‹¾å–æ¨¡å¼":"å¼€å¯æ‹¾å–æ¨¡å¼"),this.pickModeBtn.title=e?"å…³é—­æ‹¾å–æ¨¡å¼":"å¼€å¯æ‹¾å–æ¨¡å¼ï¼šç‚¹å‡»ç”»é¢è·å– yaw/pitch",this.pickModeBtn.style.background=e?"rgba(255,255,255,0.18)":"")}updateVrModeState(e){this.isVrModeActive=e,this.vrModeBtn&&(this.vrModeBtn.setAttribute("aria-label",e?"é€€å‡ºVRæ¨¡å¼":"è¿›å…¥VRæ¨¡å¼"),this.vrModeBtn.title=e?"é€€å‡ºVRæ¨¡å¼":"VRçœ¼é•œï¼šè½¬åŠ¨è®¾å¤‡æ§åˆ¶è§†è§’",this.vrModeBtn.style.background=e?"rgba(255,255,255,0.18)":"")}setViewerRootEl(e){this.viewerRootEl=e}syncFullscreenState(){const e=a();this.fullscreenBtn.setAttribute("aria-label",e?"é€€å‡ºå…¨å±":"è¿›å…¥å…¨å±"),this.fullscreenBtn.title=e?"é€€å‡ºå…¨å±":"è¿›å…¥å…¨å±",this.fullscreenBtn.innerHTML=e?g():p()}getElement(){return this.element}remove(){this.handlePickModeChange&&(window.removeEventListener("vr:pickmode",this.handlePickModeChange),this.handlePickModeChange=null),this.handleFullscreenChange&&(document.removeEventListener("fullscreenchange",this.handleFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange),this.handleFullscreenChange=null),this.element.remove()}}export{C as TopRightControls};
