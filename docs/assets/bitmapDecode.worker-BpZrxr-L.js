(function(){"use strict";self.onmessage=async a=>{const{id:e,url:i,timeoutMs:n,priority:c}=a.data,r=new AbortController,l=setTimeout(()=>r.abort(),n);try{const t={mode:"cors",cache:"default",referrerPolicy:"no-referrer",signal:r.signal};t.priority=c==="high"?"high":"low";const o=await fetch(i,t);if(!o.ok)throw new Error(`HTTP ${o.status}`);const f=await o.blob(),s=await createImageBitmap(f),g={id:e,bitmap:s};self.postMessage(g,[s])}catch(t){const o={id:e,error:t instanceof Error?t.message:String(t)};self.postMessage(o)}finally{clearTimeout(l)}}})();
