(function(){"use strict";self.onmessage=async s=>{const{id:o,url:i,timeoutMs:n,priority:c,imageOrientation:l="from-image"}=s.data,r=new AbortController,m=setTimeout(()=>r.abort(),n);try{const t={mode:"cors",cache:"default",referrerPolicy:"no-referrer",signal:r.signal};t.priority=c==="high"?"high":"low";const e=await fetch(i,t);if(!e.ok)throw new Error(`HTTP ${e.status}`);const f=await e.blob(),a=await createImageBitmap(f,{imageOrientation:l,premultiplyAlpha:"none"}),g={id:o,bitmap:a};self.postMessage(g,[a])}catch(t){const e={id:o,error:t instanceof Error?t.message:String(t)};self.postMessage(e)}finally{clearTimeout(m)}}})();
