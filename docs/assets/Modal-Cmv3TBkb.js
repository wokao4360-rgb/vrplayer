function C(){var a;return!!(document.querySelector(".vr-modal-overlay")||document.querySelector(".vr-guide-drawer.open")||document.querySelector(".fcchat-root")&&((a=document.querySelector(".fcchat-root"))==null?void 0:a.style.display)==="flex")}function h(){C()?document.documentElement.classList.add("vr-overlay-open"):document.documentElement.classList.remove("vr-overlay-open")}function L(a){const{title:E,contentEl:i,contentHtml:m,onClose:v,panelClassName:l}=a,e=document.createElement("div");e.className="vr-modal-overlay";const o=document.createElement("div");o.className="vr-modal-panel",l&&o.classList.add(l);const d=document.createElement("div");d.className="vr-modal-header";const s=document.createElement("div");s.className="vr-modal-header-title",s.textContent=E;const t=document.createElement("button");t.className="vr-modal-header-close vr-icon-btn",t.type="button",t.setAttribute("aria-label","关闭弹窗"),t.innerHTML="×",d.appendChild(s),d.appendChild(t);const c=document.createElement("div");c.className="vr-modal-body",i?c.appendChild(i):m&&(c.innerHTML=m),o.appendChild(d),o.appendChild(c),e.appendChild(o),document.body.appendChild(e),h(),l==="vr-modal-settings"&&(document.documentElement.classList.add("vr-more-open"),requestAnimationFrame(()=>{o.classList.add("is-in")}));let u=!1;const p=n=>{n.key==="Escape"&&(n.stopPropagation(),r.close())},y=n=>{n.target===e&&r.close()},f=n=>{n.preventDefault(),n.stopPropagation(),r.close()};window.addEventListener("keydown",p),e.addEventListener("click",y),t.addEventListener("click",f);const r={close:()=>{if(!u&&(u=!0,window.removeEventListener("keydown",p),e.removeEventListener("click",y),t.removeEventListener("click",f),e.parentNode&&e.parentNode.removeChild(e),l==="vr-modal-settings"&&document.documentElement.classList.remove("vr-more-open"),h(),v))try{v()}catch{}}};return r}export{L as m};
