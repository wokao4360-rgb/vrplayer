(function(){"use strict";self.onmessage=async s=>{const{id:o,url:i,timeoutMs:n,priority:l}=s.data,r=new AbortController,c=setTimeout(()=>r.abort(),n);try{const t={mode:"cors",cache:"default",referrerPolicy:"no-referrer",signal:r.signal};t.priority=l==="high"?"high":"low";const e=await fetch(i,t);if(!e.ok)throw new Error(`HTTP ${e.status}`);const f=await e.blob(),a=await createImageBitmap(f,{imageOrientation:"flipY",premultiplyAlpha:"none"}),m={id:o,bitmap:a};self.postMessage(m,[a])}catch(t){const e={id:o,error:t instanceof Error?t.message:String(t)};self.postMessage(e)}finally{clearTimeout(c)}}})();
