const v={iterations:300,width:1e3,height:1e3,padding:40,repulsion:.15,spring:.12,damping:.88};function Y(r,x,d){const s={...v,...d},h=r.length;if(h===0)return{};const o={},y=Math.max(1,Math.sqrt(h)*.5);r.forEach((a,n)=>{const t=2*Math.PI*n/h,i=(Math.random()-.5)*.2;o[a.id]={x:y*Math.cos(t)+i,y:y*Math.sin(t)+i,vx:0,vy:0}});const l=x.length>0?x:r.length>1?r.slice(0,-1).map((a,n)=>({from:a.id,to:r[n+1].id})):[];for(let a=0;a<s.iterations;a++){for(let n=0;n<h;n++){const t=r[n],i=o[t.id];for(let f=n+1;f<h;f++){const u=r[f],e=o[u.id];let m=i.x-e.x,c=i.y-e.y;const g=m*m+c*c||1e-4,M=s.repulsion/g;m*=M,c*=M,i.vx+=m,i.vy+=c,e.vx-=m,e.vy-=c}}for(const n of l){const t=o[n.from],i=o[n.to];if(!t||!i)continue;const f=i.x-t.x,u=i.y-t.y,e=Math.sqrt(f*f+u*u)||1e-4,c=s.spring*(e-1),g=f/e*c,M=u/e*c;t.vx+=g,t.vy+=M,i.vx-=g,i.vy-=M}for(const n in o){const t=o[n];t.vx*=s.damping,t.vy*=s.damping,t.x+=t.vx*.1,t.y+=t.vy*.1}}const p={};for(const a in o)p[a]={x:o[a].x,y:o[a].y};return X(p,s.width,s.height,s.padding)}function X(r,x,d,s){const h=Object.entries(r);if(h.length===0)return{};let o=1/0,y=-1/0,l=1/0,p=-1/0;for(const[,c]of h)o=Math.min(o,c.x),y=Math.max(y,c.x),l=Math.min(l,c.y),p=Math.max(p,c.y);const a=y-o||1,n=p-l||1,t=x-2*s,i=d-2*s,f=t/a,u=i/n,e=Math.min(f,u),m={};for(const[c,g]of h)m[c]={x:s+(g.x-o)*e+(t-a*e)/2,y:s+(g.y-l)*e+(i-n*e)/2};return m}function b(r){const x=r.filter(t=>t.mapPoint);if(x.length<r.length)return!0;if(x.length<2)return!1;const d=x.map(t=>t.mapPoint.x),s=x.map(t=>t.mapPoint.y),h=Math.min(...d),o=Math.max(...d),y=Math.min(...s),l=Math.max(...s),p=o-h,a=l-y,n=100;return p<n||a<n}export{Y as f,b as s};
